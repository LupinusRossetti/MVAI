# 最終処理素材の使い方ガイド

## 📁 フォルダ構成

### 最終処理素材の保存場所

最終処理が完了した素材は、以下のフォルダに保存されます：

```
C:\MVAI\99_MV_編集素材\
```

このフォルダには以下のファイルが含まれます：

1. **動画ファイル** (`*.mp4`)
   - 高品質化・リップシンク処理済みの最終動画素材
   - そのままMV編集ソフトで使用可能

2. **音声ファイル** (`*.mp3`, `*.wav`)
   - 処理済みの音声ファイル
   - MV生成時に使用

3. **XMLメタデータファイル** (`*_metadata.xml`)
   - 動画の詳細情報と処理履歴を含むメタデータ
   - 編集時の参考情報として活用

### 完成したMVの保存場所

自動生成されたMVは、以下のフォルダに保存されます：

```
C:\MVAI\98_MV_完成品\
```

このフォルダには完成したMVファイルが保存され、そのまま再生や配信に使用できます。

---

## 🎬 動画ファイルの使い方

### Adobe Premiere Pro / After Effects での使用

1. **プロジェクトにインポート**
   - Premiere Pro / After Effects を起動
   - プロジェクトパネルで右クリック → `インポート`
   - `99_MV_編集素材`フォルダから動画ファイルを選択

2. **タイムラインに配置**
   - インポートした動画をタイムラインにドラッグ&ドロップ
   - 必要に応じてトリミングやエフェクトを追加

3. **編集のポイント**
   - 解像度: 4K (3840x2160) までアップスケール済み
   - コーデック: H.264 (libx264)
   - 高品質プリセットでエンコード済みのため、そのまま使用可能

### DaVinci Resolve での使用

1. **メディアプールに追加**
   - DaVinci Resolve を起動
   - メディアプールで右クリック → `メディアをインポート`
   - `99_MV_編集素材`フォルダから動画ファイルを選択

2. **編集ページで編集**
   - メディアプールからタイムラインにドラッグ
   - カラーグレーディングやエフェクトを適用

### Final Cut Pro での使用

1. **イベントライブラリにインポート**
   - Final Cut Pro を起動
   - イベントライブラリで右クリック → `メディアをインポート`
   - `99_MV_編集素材`フォルダから動画ファイルを選択

2. **プロジェクトで編集**
   - イベントからプロジェクトにドラッグ
   - 編集、エフェクト、カラーコレクションを実行

---

## 📄 XMLメタデータの使い方

### XMLファイルの構造

XMLメタデータには以下の情報が含まれます：

```xml
<?xml version='1.0' encoding='utf-8'?>
<MVAsset version="1.0">
  <Info>
    <FileName>動画ファイル名.mp4</FileName>
    <OriginalFileName>元のファイル名.mp4</OriginalFileName>
    <ProcessedDate>処理日時（ISO形式）</ProcessedDate>
  </Info>
  <Video>
    <Codec>コーデック名（例: h264）</Codec>
    <Width>解像度の幅</Width>
    <Height>解像度の高さ</Height>
    <FrameRate>フレームレート</FrameRate>
    <Duration>動画の長さ（秒）</Duration>
    <Bitrate>ビットレート</Bitrate>
  </Video>
  <Audio>
    <Codec>音声コーデック名</Codec>
    <SampleRate>サンプルレート</SampleRate>
    <Channels>チャンネル数</Channels>
    <Bitrate>音声ビットレート</Bitrate>
  </Audio>
  <ProcessingHistory>
    <QualityEnhancement>Applied</QualityEnhancement>
    <Lipsync>Applied</Lipsync>
    <Finalized>最終処理日時</Finalized>
  </ProcessingHistory>
</MVAsset>
```

### XMLメタデータの活用方法

#### 1. **編集前の確認**
- 動画の解像度、フレームレート、長さを事前に確認
- プロジェクト設定を適切に構成

#### 2. **処理履歴の追跡**
- どの処理が適用されたかを確認
- 品質向上やリップシンク処理の有無を把握

#### 3. **自動化スクリプトでの活用**
- XMLをパースして、編集ソフトの設定を自動化
- バッチ処理やワークフロー自動化に利用

#### 4. **ドキュメント化**
- プロジェクトの記録として保存
- チーム内での情報共有に活用

---

## 🔄 ワークフロー例

### 基本的なMV編集ワークフロー

```
1. 素材の確認
   └─ 99_MV_編集素材フォルダを開く
   └─ XMLメタデータで動画情報を確認

2. 編集ソフトでプロジェクト作成
   └─ 解像度: XMLのWidth x Heightを参照
   └─ フレームレート: XMLのFrameRateを参照

3. 動画をインポート
   └─ 99_MV_編集素材フォルダから動画をインポート

4. 編集作業
   └─ カット編集
   └─ エフェクト追加
   └─ カラーグレーディング
   └─ 音声調整

5. 最終出力
   └─ 目的に応じた形式でエクスポート
```

---

## 💡 実践的なヒント

### 1. **複数の動画素材を管理**
- 各動画に対応するXMLファイルがあるため、情報を素早く確認可能
- ファイル名の規則性を活用して整理

### 2. **プロジェクト設定の最適化**
- XMLの解像度情報を元に、プロジェクト設定を自動化
- 4K素材の場合は、必要に応じてプロキシを作成

### 3. **処理履歴の確認**
- `ProcessingHistory`セクションで、適用された処理を確認
- 品質向上やリップシンク処理の有無を把握

### 4. **バックアップ**
- 最終素材は重要な成果物のため、定期的にバックアップ
- XMLメタデータも一緒に保存

---

## ⚠️ 注意事項

1. **ファイル名の変更**
   - 動画ファイル名を変更する場合は、対応するXMLファイル名も変更することを推奨
   - または、XML内の`FileName`要素を更新

2. **ファイルの移動**
   - 動画ファイルとXMLファイルは同じフォルダに配置することを推奨
   - ファイルの関連性を維持

3. **編集ソフトの互換性**
   - 生成される動画はH.264コーデック（互換性が高い）
   - 古い編集ソフトでも問題なく使用可能

---

## 📚 関連ファイル

- **音声素材**: `01_曲_Input`フォルダから処理された音声ファイル（`99_MV_編集素材`に移動済み）
- **静止画素材**: `03_静止画_選定`フォルダの静止画
- **ログファイル**: `99_Logs`フォルダの処理ログ

---

## 🆘 トラブルシューティング

### 動画が再生できない場合
- コーデックが正しくインストールされているか確認
- VLC Media Playerなどで再生を試す

### XMLが読み込めない場合
- XMLファイルが破損していないか確認
- テキストエディタで開いて構文を確認

### 解像度が合わない場合
- XMLメタデータの`Width`と`Height`を確認
- 編集ソフトのプロジェクト設定を調整

---

最終更新: 2024年

